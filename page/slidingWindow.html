<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sliding Window Visualizer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="container mx-auto p-6 bg-white rounded-lg shadow-md w-full max-w-3xl">
    <h1 class="text-2xl font-bold text-center mb-4 text-gray-800">Sliding Window Visualizer</h1>

    <!-- Sliding Window Type -->
    <div class="mb-4">
      <label for="windowType" class="block text-gray-700 font-semibold mb-2">Sliding Window Type:</label>
      <select
        id="windowType"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option value="fixed">Fixed Window</option>
        <option value="variable">Variable Window</option>
      </select>
    </div>

    <!-- Fixed Window Size -->
    <div id="fixedWindowInput" class="mb-4">
      <label for="windowSize" class="block text-gray-700 font-semibold mb-2">Window Size:</label>
      <input
        type="number"
        id="windowSize"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="e.g., 3"
      />
    </div>

    <!-- Variable Window Sizes -->
    <div id="variableWindowInput" class="mb-4 hidden">
      <label for="variableSizes" class="block text-gray-700 font-semibold mb-2">Variable Window Sizes (comma-separated):</label>
      <input
        type="text"
        id="variableSizes"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="e.g., 2,3,4"
      />
    </div>

    <!-- Array Input -->
    <div class="mb-4">
      <label for="inputArray" class="block text-gray-700 font-semibold mb-2">Enter Array (comma-separated):</label>
      <input
        type="text"
        id="inputArray"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="e.g., 1,2,3,4,5,6,7"
      />
    </div>

    <div class="flex justify-center mb-6 gap-4">
      <button id="startButton" class="bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-600 focus:outline-none">
        Start Visualization
      </button>
      <button id="resetButton" class="bg-gray-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-gray-600 focus:outline-none">
        Reset
      </button>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-center mb-6 gap-4">
      <button id="prevButton" class="bg-green-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-green-600 focus:outline-none hidden">
        Prev
      </button>
      <button id="nextButton" class="bg-yellow-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-yellow-600 focus:outline-none hidden">
        Next
      </button>
    </div>

    <!-- Visualization Section -->
    <div id="visualizer" class="mt-6 flex flex-col items-center gap-4">
      <!-- Visualization will appear here -->
    </div>
  </div>

  <script>
    const windowTypeSelect = document.getElementById("windowType");
    const fixedWindowInput = document.getElementById("fixedWindowInput");
    const variableWindowInput = document.getElementById("variableWindowInput");
    const inputArray = document.getElementById("inputArray");
    const startButton = document.getElementById("startButton");
    const resetButton = document.getElementById("resetButton");
    const prevButton = document.getElementById("prevButton");
    const nextButton = document.getElementById("nextButton");
    const visualizer = document.getElementById("visualizer");

    let steps = [];
    let currentStep = 0;

    // Toggle between fixed and variable window input fields
    windowTypeSelect.addEventListener("change", () => {
      if (windowTypeSelect.value === "fixed") {
        fixedWindowInput.classList.remove("hidden");
        variableWindowInput.classList.add("hidden");
      } else {
        fixedWindowInput.classList.add("hidden");
        variableWindowInput.classList.remove("hidden");
      }
    });

    // Start Visualization
    startButton.addEventListener("click", () => {
      const array = inputArray.value.split(",").map(Number);
      visualizer.innerHTML = ""; // Clear the visualization area
      steps = [];
      currentStep = 0;

      if (windowTypeSelect.value === "fixed") {
        const windowSize = parseInt(document.getElementById("windowSize").value);
        if (isNaN(windowSize) || windowSize <= 0) {
          alert("Please enter a valid fixed window size.");
          return;
        }
        generateFixedWindowSteps(array, windowSize);
      } else {
        const variableSizes = document.getElementById("variableSizes").value
          .split(",")
          .map(Number)
          .filter(size => size > 0);
        if (variableSizes.length === 0) {
          alert("Please enter valid variable window sizes.");
          return;
        }
        generateVariableWindowSteps(array, variableSizes);
      }

      if (steps.length > 0) {
        prevButton.classList.remove("hidden");
        nextButton.classList.remove("hidden");
        displayStep(0);
      }
    });

    // Reset inputs and visualizer
    resetButton.addEventListener("click", () => {
      inputArray.value = "";
      document.getElementById("windowSize").value = "";
      document.getElementById("variableSizes").value = "";
      visualizer.innerHTML = "";
      prevButton.classList.add("hidden");
      nextButton.classList.add("hidden");
    });

    // Navigate Steps
    prevButton.addEventListener("click", () => {
      if (currentStep > 0) {
        currentStep--;
        displayStep(currentStep);
      }
    });

    nextButton.addEventListener("click", () => {
      if (currentStep < steps.length - 1) {
        currentStep++;
        displayStep(currentStep);
      }
    });

    // Generate steps for a fixed window
    function generateFixedWindowSteps(array, windowSize) {
      for (let i = 0; i <= array.length - windowSize; i++) {
        steps.push({ start: i, end: i + windowSize });
      }
    }

    // Generate steps for a variable window
    function generateVariableWindowSteps(array, sizes) {
      let start = 0;
      for (let size of sizes) {
        const end = Math.min(start + size, array.length);
        steps.push({ start, end });
        start = end;
        if (start >= array.length) break;
      }
    }

    // Display a specific step
    function displayStep(stepIndex) {
      const array = inputArray.value.split(",").map(Number);
      const { start, end } = steps[stepIndex];
      visualizer.innerHTML = ""; // Clear previous visualization

      const row = document.createElement("div");
      row.className = "flex items-center gap-2";

      array.forEach((value, index) => {
        const box = document.createElement("div");
        box.className = `w-12 h-12 flex items-center justify-center text-lg font-bold rounded-md ${
          index >= start && index < end ? "bg-blue-500 text-white" : "bg-gray-200 text-gray-800"
        }`;
        box.textContent = value;
        row.appendChild(box);
      });

      visualizer.appendChild(row);
    }
  </script>
</body>
</html>
