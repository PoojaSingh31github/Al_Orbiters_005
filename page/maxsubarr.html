<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Max Sum Subarray Visualizer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">
  <h1 class="text-3xl font-bold mb-6">Maximum Sum Subarray of Size K</h1>

  <!-- Input Section -->
  <div class="w-full max-w-md bg-white p-6 rounded-lg shadow-md">
    <label for="arrayInput" class="block text-lg font-medium mb-2">Array (comma-separated)</label>
    <input id="arrayInput" type="text" 
           class="w-full border border-gray-300 rounded-md p-2 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">

    <label for="kInput" class="block text-lg font-medium mb-2">Value of K</label>
    <input id="kInput" type="number" 
           class="w-full border border-gray-300 rounded-md p-2 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">

    <button id="visualizeButton" 
            class="w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition">
      Visualize Algorithm
    </button>
  </div>

  <!-- Visualization Section -->
  <div id="visualization" class="w-full max-w-4xl mt-8 bg-white p-6 rounded-lg shadow-md hidden">
    <h2 class="text-xl font-semibold mb-4">Algorithm Visualization</h2>
    <div id="inputBoxes" class="flex space-x-2 mb-4"></div>
    <div id="window" class="flex space-x-2 relative"></div>
    <div id="result" class="mt-4 text-gray-800 font-semibold"></div>

    <!-- Control Buttons -->
    <div class="mt-6 flex space-x-4">
      <button id="startButton" 
              class="bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition">
        Start
      </button>
      <button id="prevButton" 
              class="bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition">
        Prev
      </button>
      <button id="nextButton" 
              class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition">
        Next
      </button>
      <button id="resetButton" 
              class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition">
        Reset
      </button>
    </div>
  </div>

  <script>const visualizeButton = document.getElementById("visualizeButton");
    const startButton = document.getElementById("startButton");
    const prevButton = document.getElementById("prevButton");
    const nextButton = document.getElementById("nextButton");
    const resetButton = document.getElementById("resetButton");
    
    const inputBoxes = document.getElementById("inputBoxes");
    const windowDiv = document.getElementById("window");
    const resultDiv = document.getElementById("result");
    const visualization = document.getElementById("visualization");
    
    let steps = []; // Store all the steps of the algorithm
    let currentStep = 0;
    let animationInterval = null;
    
    // Generate steps for the sliding window algorithm
    function generateSteps(arr, k) {
      steps = []; // Reset steps
      let windowSum = 0,
        maxSum = -Infinity;
    
      // Initial window
      for (let i = 0; i < k; i++) {
        windowSum += arr[i];
      }
      maxSum = windowSum;
      steps.push({
        start: 0,
        end: k - 1,
        windowSum,
        maxSum,
        currentWindow: arr.slice(0, k),
      });
    
      // Slide the window
      for (let i = k; i < arr.length; i++) {
        windowSum = windowSum - arr[i - k] + arr[i];
        if (windowSum > maxSum) maxSum = windowSum;
    
        steps.push({
          start: i - k + 1,
          end: i,
          windowSum,
          maxSum,
          currentWindow: arr.slice(i - k + 1, i + 1),
        });
      }
    
      // Final result step
      steps.push({
        finalResult: `The maximum sum of a subarray of size ${k} is ${maxSum}.`,
      });
    }
    
    // Render a specific step
    function renderStep(stepIndex) {
      const step = steps[stepIndex];
      if (!step) return;
    
      // Highlight the current window
      windowDiv.innerHTML = "";
      inputBoxes.innerHTML = "";
      const arr = document.getElementById("arrayInput").value.split(",").map(Number);
    
      arr.forEach((num, index) => {
        const box = document.createElement("div");
        box.textContent = num;
        box.className = `text-xl w-10 h-10 flex items-center justify-center border rounded shadow-md ${
          index >= step.start && index <= step.end ? "bg-blue-400 text-white" : "bg-gray-200"
        }`;
        inputBoxes.appendChild(box);
      });
    
      // Update result section
      resultDiv.innerHTML = step.finalResult
        ? `<p class="text-green-600"><strong>${step.finalResult}</strong></p>`
        : `
          <p>Current Window: <span class="text-blue-500">[${step.currentWindow.join(", ")}]</span></p>
          <p>Window Sum: ${step.windowSum}, Max Sum: ${step.maxSum}</p>
        `;
    }
    
    // Button actions
    visualizeButton.addEventListener("click", () => {
      const arr = document.getElementById("arrayInput").value
        .split(",")
        .map((num) => parseInt(num.trim(), 10));
      const k = parseInt(document.getElementById("kInput").value.trim(), 10);
    
      if (!arr.length || isNaN(k) || k > arr.length) {
        alert("Please enter a valid array and K value!");
        return;
      }
    
      generateSteps(arr, k); // Generate steps for the input
      visualization.classList.remove("hidden"); // Show visualization section
      renderStep(0); // Render the first step
      currentStep = 0;
    });
    
    startButton.addEventListener("click", () => {
      if (animationInterval) return; // Avoid multiple intervals
      animationInterval = setInterval(() => {
        if (currentStep >= steps.length - 1) {
          clearInterval(animationInterval);
          animationInterval = null;
          return;
        }
        renderStep(++currentStep);
      }, 1000); // Auto-play every 1 second
    });
    
    prevButton.addEventListener("click", () => {
      if (currentStep > 0) {
        renderStep(--currentStep);
      }
    });
    
    nextButton.addEventListener("click", () => {
      if (currentStep < steps.length - 1) {
        renderStep(++currentStep);
      }
    });
    
    resetButton.addEventListener("click", () => {
  // Clear any ongoing interval
  clearInterval(animationInterval);
  animationInterval = null;

  // Reset step tracker
  currentStep = 0;

  // Clear input fields
  document.getElementById("arrayInput").value = "";
  document.getElementById("kInput").value = "";

  // Hide visualization section
  visualization.classList.add("hidden");

  // Clear input boxes and result
  inputBoxes.innerHTML = "";
  windowDiv.innerHTML = "";
  resultDiv.innerHTML = "";
});

    </script>
</body>
</html>
